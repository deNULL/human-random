function HumanRandom(t,e,i){if(e=e||{},"number"==typeof t?t<=0:!t.length)throw new Error("The first argument should be a non-empty array or a positive number");this.items=t,this._count="number"==typeof t?t:t.length,this.cooldown=Math.min("cooldown"in e?e.cooldown:Math.floor(this._count/5),this._count-1),this.recovery="recovery"in e?e.recovery:Math.floor(this._count/3),this.multiplier="multiplier"in e?e.multiplier:1.3,this.normalize=!("normalize"in e)||e.normalize,this.weights=e.weights,this.random=("random"in e?e:Math).random,this._step=this.normalize&&this.recovery?Math.pow(this.multiplier,-this.recovery)/this.recovery:0,this._rand=this.random(),i?this.state=i:(this.state=new Array(this._count),this.reset())}HumanRandom.prototype.peekIndex=function(t){for(var e=0,i=0;i<this._count;i++)(n=t?0:this.state[i])>this.recovery||(s=Math.pow(this.multiplier,-n)+this._step*n,e+=s*=this.weights?this.weights[i]:1);for(var n,o=this._rand*e,e=0,i=0;i<this._count;i++)if(!((n=t?0:this.state[i])>this.recovery)){var s=Math.pow(this.multiplier,-n)+this._step*n;if(s*=this.weights?this.weights[i]:1,e<=o&&o<e+s)return i;e+=s}return~~(this._rand*this._count)},HumanRandom.prototype.nextIndex=function(t){for(var t=this.peekIndex(t),e=0;e<this._count;e++)this.state[e]=Math.max(this.state[e]-1,0);return this.state[t]=this.cooldown+this.recovery,this._rand=this.random(),t},HumanRandom.prototype.peek=function(t){t=this.peekIndex(t);return"number"==typeof this.items?t:this.items[t]},HumanRandom.prototype.next=function(t){t=this.nextIndex(t);return"number"==typeof this.items?t:this.items[t]},HumanRandom.prototype.reset=function(){for(var t=0;t<this._count;t++)this.state[t]=0},"undefined"!=typeof define&&define.amd?define([],function(){return HumanRandom}):"undefined"!=typeof module&&module.exports&&(module.exports=HumanRandom);