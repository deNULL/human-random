function HumanRandom(t,i,e){if(i=i||{},"number"==typeof t?t<=0:!t.length)throw new Error("The first argument should be a non-empty array or a positive number");this.items=t,this._count="number"==typeof t?t:t.length,this.cooldown=Math.min("cooldown"in i?i.cooldown:Math.floor(this._count/5),this._count-1),this.recovery=Math.min("recovery"in i?i.recovery:Math.floor(this._count/3),this._count-this.cooldown-1),this.multiplier="multiplier"in i?i.multiplier:1.3,this.normalize=!("normalize"in i)||i.normalize,this.weights=i.weights,this.random=("random"in i?i:Math).random,this._prob0=Math.pow(this.multiplier,-this.recovery),this._step=this.normalize?this._prob0/this.recovery:0,this._rand=this.random(),e?this.state=e:(this.state=new Array(this._count),this.reset())}HumanRandom.prototype.peekIndex=function(t){for(var i=0,e=0;e<this._count;e++)(n=t?1:this.state[e])<0||(i+=s=n*(this.weights?this.weights[e]:1));for(var n,o=this._rand*i,i=0,e=0;e<this._count;e++)if(!((n=t?1:this.state[e])<0)){var s=n*(this.weights?this.weights[e]:1);if(i<=o&&o<i+s)return e;i+=s}return~~(this._rand*this._count)},HumanRandom.prototype.nextIndex=function(t){for(var t=this.peekIndex(t),i=0;i<this._count;i++)1<=this.state[i]||(-1==this.state[i]?this.state[i]=0<this.recovery?this.normalize?0:this._prob0:1:this.state[i]<0?this.state[i]++:this.state[i]=Math.min(1,this.state[i]*this.multiplier+this._step));return this.state[t]=0<this.cooldown?-this.cooldown:this._prob0,this._rand=this.random(),t},HumanRandom.prototype.peek=function(t){t=this.peekIndex(t);return"number"==typeof this.items?t:this.items[t]},HumanRandom.prototype.next=function(t){t=this.nextIndex(t);return"number"==typeof this.items?t:this.items[t]},HumanRandom.prototype.reset=function(){for(var t=0;t<this._count;t++)this.state[t]=1},"undefined"!=typeof define&&define.amd?define([],function(){return HumanRandom}):"undefined"!=typeof module&&module.exports&&(module.exports=HumanRandom);